(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{389:function(e,t,a){Promise.resolve().then(a.bind(a,7014))},7014:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z},fetchCache:function(){return P}});var n=a(7437),r=a(2265);let s=async()=>{let e=await fetch("/api/appointments",{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch appointments");return e.json()};var i=a(1667),l=a(341),o=a(7514),c=a(6800),d=a.n(c),m=a(3673),u=a(7469),x=a(6975),p=a(5072),h=a(2427),f=a(6538),y=a(4461),v=a(7300),g=a(7474),_=a(1774),b=a(3275),j=a(8505);let N=(e,t)=>(0,j.Q)("".concat(e," ").concat(t)).toString();var w=e=>{let{today:t,selectedDay:a,setSelectedDay:s,appointments:c}=e,[j,w]=r.useState((0,o.WU)(t,"MMM-yyyy")),U=(0,y.Qc)(j,"MMM-yyyy",new Date().toString()),M=(0,m.D)({start:(0,_.z)(U),end:(0,x.v)((0,u.V)(U))});return(0,n.jsxs)("div",{className:"md:pr-14",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("h2",{className:"flex-auto font-semibold text-gray-900",children:(0,o.WU)(U,"MMM yyyy")}),(0,n.jsxs)("button",{type:"button",onClick:()=>{let e=(0,g.I)(U,{months:-1});w((0,o.WU)(e,"MMM-yyyy"))},className:"my-1.5 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Previous month"}),(0,n.jsx)(i.Z,{className:"w-5 h-5"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>{let e=(0,g.I)(U,{months:1});w((0,o.WU)(e,"MMM-yyyy"))},className:"-my-1.5 -mr-1.5 ml-2 flex flex-none items-center justify-center p-1.5 text-gray-400 hover:text-gray-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Next month"}),(0,n.jsx)(l.Z,{className:"w-5 h-5"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-7 mt-10 text-xs leading-6 text-center text-gray-500",children:[(0,n.jsx)("div",{children:"S"}),(0,n.jsx)("div",{children:"M"}),(0,n.jsx)("div",{children:"T"}),(0,n.jsx)("div",{children:"W"}),(0,n.jsx)("div",{children:"T"}),(0,n.jsx)("div",{children:"F"}),(0,n.jsx)("div",{children:"S"})]}),(0,n.jsx)("div",{className:"grid grid-cols-7 mt-2 text-sm",children:M.map((e,t)=>(0,n.jsxs)("div",{className:d()(0===t&&S[(0,v.w)(e)],"py-1.5"),children:[(0,n.jsx)("button",{type:"button",onClick:()=>s(e),className:d()((0,f.X)(e,a)&&"text-white",!(0,f.X)(e,a)&&(0,p.z)(e)&&"text-red-500",!(0,f.X)(e,a)&&!(0,p.z)(e)&&(0,h.x)(e,U)&&"text-gray-900",!(0,f.X)(e,a)&&!(0,p.z)(e)&&!(0,h.x)(e,U)&&"text-gray-400",(0,f.X)(e,a)&&(0,p.z)(e)&&"bg-red-500",(0,f.X)(e,a)&&!(0,p.z)(e)&&"bg-gray-900",!(0,f.X)(e,a)&&"hover:bg-gray-200",((0,f.X)(e,a)||(0,p.z)(e))&&"font-semibold","mx-auto flex h-8 w-8 items-center justify-center rounded-full"),children:(0,n.jsx)("time",{dateTime:(0,o.WU)(e,"yyyy-MM-dd"),children:(0,o.WU)(e,"d")})}),(0,n.jsx)("div",{className:"w-1 h-1 mx-auto mt-1",children:c.some(t=>(0,b.K)(N(t.appointment_date,t.appointment_time),e))&&(0,n.jsx)("div",{className:"w-1 h-1 rounded-full bg-sky-500"})})]},e.toString()))})]})};let S=["","col-start-2","col-start-3","col-start-4","col-start-5","col-start-6","col-start-7"];var U=a(2393),M=a(5405),E=a(4312),O=a(6366),T=e=>{let{appointment:t}=e,a=N(t.appointment_date,t.appointment_time);return(0,n.jsxs)("li",{className:"flex items-center px-4 py-2 space-x-4 group rounded-xl focus-within:bg-gray-100 hover:bg-gray-100",children:[(0,n.jsxs)("div",{className:"flex-auto",children:[(0,n.jsxs)("p",{className:"text-gray-900",children:[t.first_name," ",t.last_name]}),(0,n.jsx)("p",{className:"mt-0.5",children:(0,n.jsx)("time",{dateTime:a,children:(0,o.WU)(a,"hh:mm a")})}),(0,n.jsxs)("div",{className:"mt-4 text-[12px]",children:[(0,n.jsx)("p",{children:t.phone_number}),(0,n.jsx)("p",{children:t.email})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(E.Z,{className:"cursor-pointer hover:text-green-500"}),(0,n.jsx)(O.Z,{className:"cursor-pointer hover:text-red-500"})]})]})},A=e=>{let{selectedDay:t,selectedDateAppointmets:a}=e;return(0,n.jsxs)("section",{className:"mt-12 md:mt-0 md:pl-14",children:[(0,n.jsxs)("h2",{className:"font-semibold text-gray-900",children:["Schedule for ",(0,n.jsx)("time",{dateTime:(0,o.WU)(t,"yyyy-MM-dd"),children:(0,o.WU)(t,"MMM dd, yyy")})]}),(0,n.jsx)("ol",{className:"mt-4 space-y-1 text-sm leading-6 text-gray-500",children:a.length>0?a.map(e=>(0,n.jsx)(T,{appointment:e},e._id)):(0,n.jsx)("p",{children:"No appointments for today"})})]})},k=()=>{let[e,t]=(0,r.useState)([]),a=(0,U.I)(),[i,l]=r.useState(a),o=e.filter(e=>(0,M.K)(N(e.appointment_date,e.appointment_time),i)).sort((e,t)=>{let a=N(e.appointment_date,e.appointment_time),n=N(t.appointment_date,t.appointment_time);return new Date(a).getTime()-new Date(n).getTime()});return(0,r.useEffect)(()=>{(async()=>{try{let e=await s();t(e)}catch(e){console.error("Failed to fetch appointments:",e)}})()},[]),(0,n.jsx)("div",{className:"pt-16 bg-white min-h-[100vh]",children:(0,n.jsx)("div",{className:"max-w-md px-4 mx-auto sm:px-7 md:max-w-4xl md:px-6",children:(0,n.jsxs)("div",{className:"md:grid md:grid-cols-2 md:divide-x md:divide-gray-200",children:[(0,n.jsx)(w,{today:a,selectedDay:i,setSelectedDay:l,appointments:e}),(0,n.jsx)(A,{selectedDay:i,selectedDateAppointmets:o})]})})})},L=a(6648);function R(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}var D=e=>{let{navigation:t,setActiveTab:a}=e,[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1);return(0,n.jsxs)("nav",{className:"bg-gray-900",children:[(0,n.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,n.jsx)("div",{className:"flex h-16 items-center justify-between",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(L.default,{src:"/logo.png",alt:"Your Company",width:10,height:10})}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)("div",{className:"ml-10 flex items-baseline space-x-4",children:t.map(e=>(0,n.jsx)("div",{className:R(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","rounded-md px-3 py-2 text-sm font-medium cursor-pointer"),"aria-current":e.current?"page":void 0,onClick:()=>a(e.name),children:e.name},e.name))})})]})})}),s&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsx)("div",{className:"space-y-1 px-2 pb-3 pt-2 sm:px-3",children:t.map(e=>(0,n.jsx)("div",{className:R(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name))})})]})},I=a(1638),C=a(3102),H=a(7135),W=a(7588),B=a(5106);let z=async(e,t)=>{if(!(await fetch("/api/availability/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update availability")},V=async(e,t)=>{if(!(await fetch("/api/availability/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Failed to update availability")};var F=a(573),G=()=>{let[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)([]),[i,l]=(0,r.useState)({}),[o,c]=(0,r.useState)(!1),{allTimes:d,alreadyReservedTime:m}=(0,B.z)(e),u=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},x=async()=>{try{i&&i._id?await V(i._id,{blocked_time:a}):await z(e,{blocked_time:a})}catch(e){console.error("Failed to update availability:",e)}};return(0,r.useEffect)(()=>{let t=async()=>{try{let t=await (0,F.a)(e);t&&t.length>0?(s(t[0].blocked_time),l(t[0])):(s([]),l({}))}catch(e){console.log(e)}};e&&t()},[e]),(0,r.useEffect)(()=>{m.length>1&&s(e=>[...e,...m])},[m]),(0,n.jsxs)("div",{className:"min-h-full p-10",children:[(0,n.jsx)("h2",{className:"py-5 text-xl font-bold",children:"Manage your time"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"Choose a date "}),(0,n.jsxs)(W.A,{className:"mb-4",children:[(0,n.jsx)(H._,{htmlFor:"text",children:"Time"}),(0,n.jsx)(C.I,{id:"date",placeholder:"+1...",type:"date",value:e,onChange:e=>{t(e.target.value)}})]}),(0,n.jsx)("div",{className:"flex flex-wrap items-center justify-start gap-y-2 gap-x-4",children:e&&d.map(e=>(0,n.jsx)(I.Z,{time:e,selectedTime:a.includes(e),handleTimeSelect:u},e))}),(0,n.jsxs)("div",{className:"flex gap-5",children:[(0,n.jsx)("button",{onClick:()=>{o?s([]):s(d),c(!o)},children:o?"Deselect All":"Select All"}),(0,n.jsx)("button",{onClick:x,children:"Save"})]})]})]})};let P="force-no-store",X=[{name:"Dashboard",current:!0},{name:"Time",current:!1}];var Z=()=>{let[e,t]=(0,r.useState)(X);return(0,n.jsxs)("div",{className:"relative bg-black",children:[(0,n.jsx)(D,{navigation:e,setActiveTab:a=>{t(e.map(e=>({...e,current:e.name===a})))}}),(()=>{var t;switch(null===(t=e.find(e=>e.current))||void 0===t?void 0:t.name){case"Dashboard":default:return(0,n.jsx)(k,{});case"Time":return(0,n.jsx)(G,{})}})()]})}},9435:function(e,t,a){"use strict";a.d(t,{R:function(){return r}});var n=a(7437);let r=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"group-hover/btn:opacity-100 block transition duration-500 opacity-0 absolute h-px w-full -bottom-px inset-x-0 bg-gradient-to-r from-transparent via-cyan-500 to-transparent"}),(0,n.jsx)("span",{className:"group-hover/btn:opacity-100 blur-sm block transition duration-500 opacity-0 absolute h-px w-1/2 mx-auto -bottom-px inset-x-10 bg-gradient-to-r from-transparent via-indigo-500 to-transparent"})]})},3102:function(e,t,a){"use strict";a.d(t,{I:function(){return m}});var n=a(8646),r=a(7437),s=a(2265),i=a(7934),l=a(5282),o=a(6804),c=a(4924);function d(){let e=(0,n._)(["\n        radial-gradient(\n          "," circle at ","px ","px,\n          var(--blue-500),\n          transparent 80%\n        )\n      "]);return d=function(){return e},e}let m=s.forwardRef((e,t)=>{let{className:a,type:n,...m}=e,[u,x]=s.useState(!1),p=(0,l.c)(0),h=(0,l.c)(0);return(0,r.jsx)(o.E.div,{style:{background:(0,c.Y)(d(),u?"100px":"0px",p,h)},onMouseMove:function(e){let{currentTarget:t,clientX:a,clientY:n}=e,{left:r,top:s}=t.getBoundingClientRect();p.set(a-r),h.set(n-s)},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),className:"p-[2px] rounded-lg transition duration-300 group/input",children:(0,r.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full border-none bg-gray-50 dark:bg-zinc-800 text-black dark:text-white shadow-input rounded-md px-3 py-2 text-sm  file:border-0 file:bg-transparent \n          file:text-sm file:font-medium placeholder:text-neutral-400 dark:placeholder-text-neutral-600 \n          focus-visible:outline-none focus-visible:ring-[2px]  focus-visible:ring-neutral-400 dark:focus-visible:ring-neutral-600\n           disabled:cursor-not-allowed disabled:opacity-50\n           dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]\n           group-hover/input:shadow-none transition duration-400\n           ",a),ref:t,...m})})});m.displayName="Input"},7135:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var n=a(7437),r=a(2265),s=a(6657),i=a(7934);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)(s.f,{ref:t,className:(0,i.cn)("text-sm font-medium text-black dark:text-white leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});l.displayName=s.f.displayName},7588:function(e,t,a){"use strict";a.d(t,{A:function(){return s}});var n=a(7437),r=a(7934);let s=e=>{let{children:t,className:a}=e;return(0,n.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 w-full",a),children:t})}},1638:function(e,t,a){"use strict";var n=a(7437),r=a(9435);a(2265),t.Z=e=>{let{time:t,handleTimeSelect:a,selectedTime:s}=e;return(0,n.jsx)("div",{className:"mb-4 w-max",onClick:()=>a(t),children:(0,n.jsxs)("div",{className:"cursor-pointer flex justify-center items-center px-2 text-xs bg-gradient-to-br relative group/btn from-black dark:from-zinc-900 dark:to-zinc-900 to-neutral-600 dark:bg-zinc-800 w-full text-white rounded-md h-10 font-medium shadow-[0px_1px_0px_0px_#ffffff40_inset,0px_-1px_0px_0px_#ffffff40_inset] dark:shadow-[0px_1px_0px_0px_var(--zinc-800)_inset,0px_-1px_0px_0px_var(--zinc-800)_inset ".concat(s?"text-purple border-purple border-[1px] border-solid":""),children:[t,(0,n.jsx)(r.R,{})]})})}},5106:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var n=a(573);let r=async e=>{let t=await fetch("/api/appointments/".concat(e.date),{cache:"no-store"});if(!t.ok)throw Error("Failed to fetch appointments");return t.json()},s=()=>{let e=[],t=e=>e<10?"0".concat(e):e.toString();for(let a=10;a<=12;a++)e.push({time:"".concat(t(a),":00 AM")}),e.push({time:"".concat(t(a),":30 AM")});for(let a=1;a<=6;a++)e.push({time:"".concat(t(a),":00 PM")}),e.push({time:"".concat(t(a),":30 PM")});return e};var i=a(6565),l=a(2265);let o=(e,t)=>{let[a,o]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),m=s().map(e=>e.time);return(0,l.useEffect)(()=>{e&&(async()=>{try{let a=await r({date:e}),[s]=await (0,n.a)(e),l=t?Math.floor(i.v[t]/30):0;a.map((t,a)=>{let n=i.v[t.service_id]/30,r=t.appointment_date,s=t.appointment_time;if(m.includes(t.appointment_time)&&e===r){let e=0,t=0;m.indexOf(s)-l>=0?e=m.indexOf(s)-l:t=m.indexOf(s)-l;let a=Math.floor(n)+Math.abs(l)+t;d(m.slice(e+1,e+1+a)),m.splice(e+1,a)}}),(null==s?void 0:s.blocked_time.length)?o(m.filter(e=>!s.blocked_time.includes(e))):o(m)}catch(e){console.error("Failed to fetch appointments:",e)}})()},[e,t]),{timeSlot:a,allTimes:m,alreadyReservedTime:c}}},573:function(e,t,a){"use strict";a.d(t,{a:function(){return n}});let n=async e=>{let t=await fetch("/api/availability/".concat(e),{cache:"no-store"});if(!t.ok)throw Error("Failed to fetch appointments");return t.json()}},8648:function(e,t,a){"use strict";var n,r;a.d(t,{U:function(){return n}}),(r=n||(n={})).CLASSIC="classic",r.TWO_D="2D",r.THREE_D="3D",r.FOUR_D="4D",r.CORRECTION="correction",r.HYBRID="hybrid",r.NATURAL="natural",r.LIGHT_VOLUME="light_volume",r.VOLUME="volume",r.MEGA_VOLUME="mega_volume",r.LASHES_REMOVAL="lashes_removal",r.EXPRESS_LASHES="express_lashes",r.BOTTOM_LASHES="bottom_lashes",r.BROW_SHAPING="brow_shaping",r.BROW_TINTING="brow_tinting",r.BROW_LAMINATION="brow_lamination"},7934:function(e,t,a){"use strict";a.d(t,{cn:function(){return s}});var n=a(4839),r=a(6164);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}},6565:function(e,t,a){"use strict";a.d(t,{B:function(){return s},v:function(){return r}});var n=a(8648);let r={[n.U.CLASSIC]:180,[n.U.TWO_D]:150,[n.U.THREE_D]:120,[n.U.FOUR_D]:90,[n.U.CORRECTION]:45,[n.U.HYBRID]:160,[n.U.NATURAL]:140,[n.U.LIGHT_VOLUME]:130,[n.U.VOLUME]:110,[n.U.MEGA_VOLUME]:100,[n.U.LASHES_REMOVAL]:30,[n.U.EXPRESS_LASHES]:60,[n.U.BOTTOM_LASHES]:45,[n.U.BROW_SHAPING]:30,[n.U.BROW_TINTING]:45,[n.U.BROW_LAMINATION]:60},s={[n.U.CLASSIC]:"Classic",[n.U.TWO_D]:"Hybrid (1-2D)",[n.U.THREE_D]:"Natural (2D)",[n.U.FOUR_D]:"Light volume (3D)",[n.U.CORRECTION]:"Volume (4-5D)",[n.U.HYBRID]:"Hybrid (1-2D)",[n.U.NATURAL]:"Natural (2D)",[n.U.LIGHT_VOLUME]:"Light volume (3D)",[n.U.VOLUME]:"Volume (4-5D)",[n.U.MEGA_VOLUME]:"Mega volume (6D+)",[n.U.LASHES_REMOVAL]:"Lashes removal",[n.U.EXPRESS_LASHES]:"Express lashes",[n.U.BOTTOM_LASHES]:"Bottom lashes",[n.U.BROW_SHAPING]:"Brow Shaping",[n.U.BROW_TINTING]:"Brow Tinting",[n.U.BROW_LAMINATION]:"Brow Lamination"}}},function(e){e.O(0,[206,648,992,971,23,744],function(){return e(e.s=389)}),_N_E=e.O()}]);