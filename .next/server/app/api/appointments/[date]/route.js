"use strict";(()=>{var e={};e.id=779,e.ids=[779],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3798:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>y,patchFetch:()=>A,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var r={};n.r(r),n.d(r,{DELETE:()=>d,GET:()=>u,PATCH:()=>l});var a=n(9303),s=n(8716),o=n(670),i=n(2854),p=n(3119);let u=async(e,{params:t})=>{try{await (0,p.P)();let e=await i.Z.find({appointment_date:t.date});return new Response(JSON.stringify(e),{status:200})}catch(e){return console.error(e),new Response("Failed to fetch appoimentsByDate",{status:500})}},d=async(e,{params:t})=>{console.log("params",t);try{if(await (0,p.P)(),!await i.Z.findByIdAndDelete(t.date))return new Response("Appointment not found",{status:404});return new Response("Appointment deleted successfully",{status:200})}catch(e){return console.error(e),new Response("Failed to delete appointment",{status:500})}},l=async(e,{params:t})=>{let{first_name:n,last_name:r,email:a,phone_number:s,service_id:o,appointment_date:u,status:d,notes:l}=await e.json();try{await (0,p.P)();let e=await i.Z.findById(t.date);if(!e)return new Response("existingAppointment not found",{status:404});return e.first_name=n,e.last_name=r,e.email=a,e.phone_number=s,e.service_id=o,e.appointment_date=u,e.status=d,e.notes=l,e.save(),new Response("Successfully updated the existingAppointment",{status:200})}catch(e){return new Response("Error Updating existingAppointment",{status:500})}},c=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/appointments/[date]/route",pathname:"/api/appointments/[date]",filename:"route",bundlePath:"app/api/appointments/[date]/route"},resolvedPagePath:"/Users/User/Desktop/BestTime/ellinclick/app/api/appointments/[date]/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:_}=c,y="/api/appointments/[date]/route";function A(){return(0,o.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}},2854:(e,t,n)=>{var r;n.d(t,{Z:()=>p}),function(e){e.CLASSIC="classic",e.TWO_D="2D",e.THREE_D="3D",e.FOUR_D="4D",e.CORRECTION="correction",e.HYBRID="hybrid",e.NATURAL="natural",e.LIGHT_VOLUME="light_volume",e.VOLUME="volume",e.MEGA_VOLUME="mega_volume",e.LASHES_REMOVAL="lashes_removal",e.EXPRESS_LASHES="express_lashes",e.BOTTOM_LASHES="bottom_lashes",e.BROW_SHAPING="brow_shaping",e.BROW_TINTING="brow_tinting",e.BROW_LAMINATION="brow_lamination"}(r||(r={}));let{Schema:a,models:s,model:o}=n(1185),i=new a({first_name:{type:String,required:!0},last_name:{type:String,required:!0},email:{type:String,required:!0,unique:!1},phone_number:{type:String,required:!0},service_id:{type:String,enum:r,required:!0},appointment_date:{type:String,required:!0},appointment_time:{type:String,required:!0},status:{type:String,enum:["scheduled","completed","canceled"],required:!0},notes:{type:String}}),p=s.Appointment||o("Appointment",i)},9303:(e,t,n)=>{e.exports=n(517)},3119:(e,t,n)=>{n.d(t,{P:()=>i});var r=n(1185),a=n.n(r);let s=!1,o=process.env.MONGODB_URL??"",i=async()=>{if(a().set("strictQuery",!0),s){console.log("MongoDB is already connected");return}try{await a().connect(o,{dbName:"ellin"}),s=!0,console.log("MongoDB is connected")}catch(e){console.error("Error connecting to MongoDB:",e)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[948],()=>n(3798));module.exports=r})();