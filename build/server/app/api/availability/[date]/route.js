"use strict";(()=>{var e={};e.id=932,e.ids=[932],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6112:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>w,serverHooks:()=>h,staticGenerationAsyncStorage:()=>b});var i={};a.r(i),a.d(i,{GET:()=>y,PATCH:()=>g,PUT:()=>v});var r=a(9303),n=a(8716),s=a(670);let{Schema:o,models:l,model:u}=a(1185),c=new o({date:{type:String,required:!0},blocked_time:{type:[String],required:!0}}),d=l.Availability||u("Availability",c);var p=a(3119);let y=async(e,{params:t})=>{try{await (0,p.P)();let e=await d.find({date:t.date});return new Response(JSON.stringify(e),{status:200})}catch(e){return console.error(e),new Response("Failed to fetch availabilityByDate",{status:500})}},v=async(e,{params:t})=>{let{blocked_time:a}=await e.json();try{await (0,p.P)();let e=new d({date:t.date,blocked_time:a});return await e.save(),new Response("Successfully blocked the existingAvailability",{status:200})}catch(e){return new Response("Error to Block the time",{status:500})}},g=async(e,{params:t})=>{let{blocked_time:a}=await e.json();console.log("params",t);try{await (0,p.P)();let e=await d.findById(t.date);if(!e)return new Response("existingAppointment not found",{status:404});return e.blocked_time=a,e.save(),new Response("Successfully updated bloked tine!",{status:200})}catch(e){return new Response("Error Updating existingAvailability",{status:500})}},w=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/availability/[date]/route",pathname:"/api/availability/[date]",filename:"route",bundlePath:"app/api/availability/[date]/route"},resolvedPagePath:"/Users/User/Desktop/BestTime/ellinclick/app/api/availability/[date]/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:b,serverHooks:h}=w,x="/api/availability/[date]/route";function f(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:b})}},9303:(e,t,a)=>{e.exports=a(517)},3119:(e,t,a)=>{a.d(t,{P:()=>o});var i=a(1185),r=a.n(i);let n=!1,s=process.env.MONGODB_URL??"",o=async()=>{if(r().set("strictQuery",!0),n){console.log("MongoDB is already connected");return}try{await r().connect(s,{dbName:"ellin"}),n=!0,console.log("MongoDB is connected")}catch(e){console.error("Error connecting to MongoDB:",e)}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[948],()=>a(6112));module.exports=i})();